<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.3.2 (Python 3.11.9 on win32)" generated="2025-11-11T20:05:31.449527" rpa="false" schemaversion="5">
<suite id="s1" name="Run Feature Tests" source="C:\Users\zubai\OneDrive\Desktop\E-Trading-robot\tests-robot\run_feature_tests.robot">
<kw name="Subscribe All Market Feeds" owner="trading_bdd" type="SETUP">
<kw name="Subscribe To Market Feed" owner="Trading">
<arg>US0000000001</arg>
<arg>100.5</arg>
<status status="PASS" start="2025-11-11T20:05:31.674277" elapsed="0.002022"/>
</kw>
<kw name="Subscribe To Market Feed" owner="Trading">
<arg>US0000000002</arg>
<arg>99.8</arg>
<status status="PASS" start="2025-11-11T20:05:31.676299" elapsed="0.004297"/>
</kw>
<kw name="Subscribe To Market Feed" owner="Trading">
<arg>GB0000000003</arg>
<arg>100.2</arg>
<status status="PASS" start="2025-11-11T20:05:31.680596" elapsed="0.004468"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.672246" elapsed="0.012818"/>
</kw>
<test id="s1-t1" name="1) Create and confirm valid trade" line="6">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;101000000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.689334" level="INFO">${notional_float} = 101000000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.689334" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.689334" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.689334" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.689334" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.689334" elapsed="0.007732"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.697406" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.689334" elapsed="0.008072"/>
</kw>
<kw name="When &quot;T1&quot; submits a &quot;BUY&quot; trade on &quot;US0000000001&quot; qty &quot;1000000&quot; limit &quot;101.0&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.700138" level="INFO">${qty_int} = 1000000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.697406" elapsed="0.002732"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.700138" level="INFO">${price_float} = 101.0</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.700138" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.700138" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.700138" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.704166" level="INFO">${id} = 3906d63e-9e69-4218-9c80-c4c9ebc8c883</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.700138" elapsed="0.004028"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.705177" level="INFO">${TRADE_ID} = 3906d63e-9e69-4218-9c80-c4c9ebc8c883</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.705177" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.700138" elapsed="0.005039"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.705177" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.705177" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.700138" elapsed="0.005039"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.697406" elapsed="0.007771"/>
</kw>
<kw name="Then trade history contains &quot;CREATED,EXECUTED,PENDING_CONFIRMATION,CONFIRMED&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.708978" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.708978" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.705177" elapsed="0.003801"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.705177" elapsed="0.003801"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.713308" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.708978" elapsed="0.004330"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.713308" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.713308" level="INFO">Trade 3906d63e-9e69-4218-9c80-c4c9ebc8c883 contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.713308" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.705177" elapsed="0.008131"/>
</kw>
<tag>valid</tag>
<status status="PASS" start="2025-11-11T20:05:31.685064" elapsed="0.028244"/>
</test>
<test id="s1-t2" name="2) Invalid ISIN or instrument" line="12">
<try>
<branch type="TRY">
<kw name="When &quot;T1&quot; submits a &quot;BUY&quot; trade on &quot;BADISIN123456&quot; qty &quot;100000&quot; limit &quot;100.0&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.713308" level="INFO">${qty_int} = 100000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.713308" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.721357" level="INFO">${price_float} = 100.0</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.721357" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.721357" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.721357" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.731661" level="FAIL">Invalid ISIN</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="FAIL" start="2025-11-11T20:05:31.721357" elapsed="0.010304">Invalid ISIN</status>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.731661" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-11-11T20:05:31.721357" elapsed="0.010304">Invalid ISIN</status>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.733624" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.731661" elapsed="0.001963"/>
</branch>
<status status="FAIL" start="2025-11-11T20:05:31.721357" elapsed="0.012267">Invalid ISIN</status>
</try>
<status status="FAIL" start="2025-11-11T20:05:31.713308" elapsed="0.020316">Invalid ISIN</status>
</kw>
<status status="FAIL" start="2025-11-11T20:05:31.713308" elapsed="0.020316">Invalid ISIN</status>
</branch>
<branch type="EXCEPT">
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.734138" level="INFO">Invalid ISIN correctly rejected</msg>
<arg>Invalid ISIN correctly rejected</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.734138" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.734138" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.713308" elapsed="0.020830"/>
</try>
<tag>invalid_isin</tag>
<status status="PASS" start="2025-11-11T20:05:31.713308" elapsed="0.020830"/>
</test>
<test id="s1-t3" name="3) Price deviation &gt; market tolerance" line="20">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;100000000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.737909" level="INFO">${notional_float} = 100000000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.737909" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.737909" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.737909" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.737909" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.737909" elapsed="0.000000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.745963" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.736153" elapsed="0.009810"/>
</kw>
<kw name="When &quot;T1&quot; submits a &quot;BUY&quot; trade on &quot;US0000000002&quot; qty &quot;1000000&quot; limit &quot;10.0&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.749856" level="INFO">${qty_int} = 1000000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.747619" elapsed="0.002237"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.749856" level="INFO">${price_float} = 10.0</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.749856" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.749856" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.749856" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.755895" level="INFO">${id} = 33b299ca-8597-4b77-bffc-2edef1d40608</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.749856" elapsed="0.006039"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.757855" level="INFO">${TRADE_ID} = 33b299ca-8597-4b77-bffc-2edef1d40608</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.757855" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.749856" elapsed="0.007999"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.757855" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.757855" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.749856" elapsed="0.007999"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.747619" elapsed="0.010236"/>
</kw>
<kw name="Then trade history contains &quot;REJECTED&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.762307" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.762307" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.762307" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.762307" elapsed="0.000000"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.762307" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.762307" elapsed="0.000000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.762307" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.762307" level="INFO">Trade 33b299ca-8597-4b77-bffc-2edef1d40608 contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.762307" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.757855" elapsed="0.004452"/>
</kw>
<tag>price_deviation</tag>
<status status="PASS" start="2025-11-11T20:05:31.736153" elapsed="0.026154"/>
</test>
<test id="s1-t4" name="4) Execute already confirmed trade" line="26">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;101000000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.771135" level="INFO">${notional_float} = 101000000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.771135" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.771135" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.771135" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.778797" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.771135" elapsed="0.007662"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.771135" elapsed="0.007662"/>
</kw>
<kw name="When &quot;T1&quot; submits a &quot;BUY&quot; trade on &quot;US0000000001&quot; qty &quot;1000000&quot; limit &quot;101.0&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.778797" level="INFO">${qty_int} = 1000000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.778797" level="INFO">${price_float} = 101.0</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.778797" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.787316" level="INFO">${id} = abe3bd63-b5cc-44c0-ba9c-d274614aa17e</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.008519"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.795309" level="INFO">${TRADE_ID} = abe3bd63-b5cc-44c0-ba9c-d274614aa17e</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.795309" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.016512"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.796595" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.795309" elapsed="0.001286"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.017798"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.778797" elapsed="0.017798"/>
</kw>
<kw name="Then trade history contains &quot;CONFIRMED&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.797610" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.797610" elapsed="0.001634"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.797610" elapsed="0.001634"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.797610" elapsed="0.001634"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.803639" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.799244" elapsed="0.004395"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.803639" elapsed="0.001096"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.804735" level="INFO">Trade abe3bd63-b5cc-44c0-ba9c-d274614aa17e contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.804735" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.797610" elapsed="0.007125"/>
</kw>
<tag>double_exec</tag>
<status status="PASS" start="2025-11-11T20:05:31.770743" elapsed="0.035091"/>
</test>
<test id="s1-t5" name="5) Simulate random system failure causes retry" line="32">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;101000000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.811865" level="INFO">${notional_float} = 101000000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.805834" elapsed="0.006031"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.811865" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.811865" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.811865" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.811865" elapsed="0.000000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.811865" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.805834" elapsed="0.006031"/>
</kw>
<kw name="When &quot;T1&quot; submits a &quot;SELL&quot; trade on &quot;US0000000002&quot; qty &quot;800000&quot; limit &quot;99.9&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.820919" level="INFO">${qty_int} = 800000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.820372" elapsed="0.000547"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.820919" level="INFO">${price_float} = 99.9</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.820919" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.820919" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.820919" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.828559" level="INFO">${id} = 2d1fc8a1-8957-4133-85ab-6754aa1bdd6e</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.820919" elapsed="0.007640"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.828559" level="INFO">${TRADE_ID} = 2d1fc8a1-8957-4133-85ab-6754aa1bdd6e</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.828559" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.820919" elapsed="0.007640"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.828559" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.828559" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.820919" elapsed="0.011150"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.811865" elapsed="0.020204"/>
</kw>
<kw name="Then trade history contains &quot;RETRY&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.832069" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.832069" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.832069" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.832069" elapsed="0.000000"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.837120" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.832069" elapsed="0.005051"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.837120" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.837120" level="INFO">Trade 2d1fc8a1-8957-4133-85ab-6754aa1bdd6e contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.837120" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.832069" elapsed="0.005051"/>
</kw>
<tag>system_failure</tag>
<status status="PASS" start="2025-11-11T20:05:31.805834" elapsed="0.031286"/>
</test>
<test id="s1-t6" name="6) Partial fill execution" line="38">
<kw name="Given trader &quot;T2&quot; has exposure for notional &quot;302400000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.844962" level="INFO">${notional_float} = 302400000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.844962" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.844962" level="INFO">${adjusted} = 40000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.844962" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.844962" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.844962" elapsed="0.000000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.844962" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.837120" elapsed="0.007842"/>
</kw>
<kw name="When &quot;T2&quot; submits a &quot;BUY&quot; trade on &quot;GB0000000003&quot; qty &quot;3000000&quot; limit &quot;100.8&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.853022" level="INFO">${qty_int} = 3000000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.853022" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.853022" level="INFO">${price_float} = 100.8</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.853022" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.853022" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.853022" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.861062" level="INFO">${id} = 1244045e-a32d-4881-9d25-3d8959056b20</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.853022" elapsed="0.008040"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.862083" level="INFO">${TRADE_ID} = 1244045e-a32d-4881-9d25-3d8959056b20</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.862083" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.853022" elapsed="0.009061"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.862083" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.862083" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.853022" elapsed="0.009061"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.853022" elapsed="0.009061"/>
</kw>
<kw name="Then trade history contains &quot;PARTIALLY_FILLED&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.862083" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.862083" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.862083" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.862083" elapsed="0.000000"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.868121" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.862083" elapsed="0.006038"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.868121" elapsed="0.001010"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.869131" level="INFO">Trade 1244045e-a32d-4881-9d25-3d8959056b20 contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.869131" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.862083" elapsed="0.007048"/>
</kw>
<tag>partial_fill</tag>
<status status="PASS" start="2025-11-11T20:05:31.837120" elapsed="0.032011"/>
</test>
<test id="s1-t7" name="7) Trade cancelled before confirmation" line="44">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;101000000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.875205" level="INFO">${notional_float} = 101000000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.873179" elapsed="0.002026"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.877228" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.875205" elapsed="0.002023"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.879244" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.877228" elapsed="0.002016"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.879244" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.869131" elapsed="0.010113"/>
</kw>
<kw name="When &quot;T1&quot; submits a &quot;BUY&quot; trade on &quot;US0000000001&quot; qty &quot;1000000&quot; limit &quot;101.0&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.883423" level="INFO">${qty_int} = 1000000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.883423" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.885440" level="INFO">${price_float} = 101.0</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.883423" elapsed="0.002017"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.885744" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.885744" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.891479" level="INFO">${id} = 1dfd1890-e607-4816-ab60-9d68b9bb4e7d</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.885744" elapsed="0.005735"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.891479" level="INFO">${TRADE_ID} = 1dfd1890-e607-4816-ab60-9d68b9bb4e7d</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.891479" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.885744" elapsed="0.005735"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.891479" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.891479" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.885744" elapsed="0.005735"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.883423" elapsed="0.010080"/>
</kw>
<kw name="Then trade history contains &quot;CANCELLED&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.894236" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.894236" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.894236" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.894236" elapsed="0.000000"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.901598" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.894236" elapsed="0.007362"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.901598" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.901598" level="INFO">Trade 1dfd1890-e607-4816-ab60-9d68b9bb4e7d contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.901598" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.894236" elapsed="0.007362"/>
</kw>
<tag>cancel_before_confirm</tag>
<status status="PASS" start="2025-11-11T20:05:31.869131" elapsed="0.032467"/>
</test>
<test id="s1-t8" name="8a) Multiple concurrent traders - T1" line="50">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;101000000&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.906742" level="INFO">${notional_float} = 101000000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.906742" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.909777" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.908765" elapsed="0.001012"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.909777" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.000000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.906742" elapsed="0.003035"/>
</kw>
<kw name="When &quot;T1&quot; submits a &quot;BUY&quot; trade on &quot;US0000000001&quot; qty &quot;1000000&quot; limit &quot;101.0&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.909777" level="INFO">${qty_int} = 1000000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.909777" level="INFO">${price_float} = 101.0</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.909777" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.918329" level="INFO">${id} = 5b911630-a8ba-4adc-9732-ae9d97027d85</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.008552"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.921644" level="INFO">${TRADE_ID} = 5b911630-a8ba-4adc-9732-ae9d97027d85</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.921644" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.011867"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.921644" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.921644" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.011867"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.909777" elapsed="0.011867"/>
</kw>
<kw name="Then trade history contains &quot;CREATED&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.921644" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.921644" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.921644" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.921644" elapsed="0.000000"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.930090" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.921644" elapsed="0.008446"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.930090" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.930090" level="INFO">Trade 5b911630-a8ba-4adc-9732-ae9d97027d85 contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.930090" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.921644" elapsed="0.008446"/>
</kw>
<tag>concurrency</tag>
<status status="PASS" start="2025-11-11T20:05:31.901598" elapsed="0.028492"/>
</test>
<test id="s1-t9" name="8b) Multiple concurrent traders - T2" line="56">
<kw name="Given trader &quot;T2&quot; has exposure for notional &quot;199200000&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.930090" level="INFO">${notional_float} = 199200000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.930090" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.930090" level="INFO">${adjusted} = 40000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.930090" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.938486" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.930090" elapsed="0.008396"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.938486" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.930090" elapsed="0.008396"/>
</kw>
<kw name="When &quot;T2&quot; submits a &quot;SELL&quot; trade on &quot;US0000000002&quot; qty &quot;2000000&quot; limit &quot;99.6&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.938486" level="INFO">${qty_int} = 2000000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.938486" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.946520" level="INFO">${price_float} = 99.6</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.938486" elapsed="0.008034"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.946520" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.946520" level="INFO">${id} = 29ed67df-0d06-4c3b-a3a4-94e9be4fa9a1</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.946520" level="INFO">${TRADE_ID} = 29ed67df-0d06-4c3b-a3a4-94e9be4fa9a1</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.938486" elapsed="0.008034"/>
</kw>
<kw name="Then trade history contains &quot;CREATED&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.000000"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.956814" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.010294"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.958882" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.958882" level="INFO">Trade 29ed67df-0d06-4c3b-a3a4-94e9be4fa9a1 contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.958882" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.946520" elapsed="0.012362"/>
</kw>
<tag>concurrency</tag>
<status status="PASS" start="2025-11-11T20:05:31.930090" elapsed="0.030819"/>
</test>
<test id="s1-t10" name="9) Rapid market update" line="62">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;79920000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.963709" level="INFO">${notional_float} = 79920000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.963709" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.963709" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.963709" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.967738" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.963709" elapsed="0.004029"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.969753" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.962924" elapsed="0.006829"/>
</kw>
<kw name="When &quot;T1&quot; submits a &quot;BUY&quot; trade on &quot;US0000000002&quot; qty &quot;800000&quot; limit &quot;99.9&quot;" owner="trading_bdd" source_name="&quot;${trader}&quot; submits a &quot;${side}&quot; trade on &quot;${isin}&quot; qty &quot;${qty}&quot; limit &quot;${price}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.971265" level="INFO">${qty_int} = 800000</msg>
<var>${qty_int}</var>
<arg>int("${qty}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.969753" elapsed="0.001512"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.971586" level="INFO">${price_float} = 99.9</msg>
<var>${price_float}</var>
<arg>float("${price}")</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.971586" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.971586" level="INFO">${adjusted_qty} = 100000</msg>
<var>${adjusted_qty}</var>
<arg>min(${qty_int}, 100000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.971586" elapsed="0.000000"/>
</kw>
<try>
<branch type="TRY">
<kw name="Retry Execution With Backoff" owner="Trading">
<msg time="2025-11-11T20:05:31.971586" level="INFO">${id} = e779cccc-9dd1-408e-be23-95156326e1b0</msg>
<var>${id}</var>
<arg>${isin}</arg>
<arg>${trader}</arg>
<arg>${side}</arg>
<arg>${adjusted_qty}</arg>
<arg>${price_float}</arg>
<arg>${MAX_RETRIES}</arg>
<arg>${TOLERANCE}</arg>
<status status="PASS" start="2025-11-11T20:05:31.971586" elapsed="0.000000"/>
</kw>
<kw name="Set Test Variable" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.971586" level="INFO">${TRADE_ID} = e779cccc-9dd1-408e-be23-95156326e1b0</msg>
<arg>${TRADE_ID}</arg>
<arg>${id}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="PASS" start="2025-11-11T20:05:31.971586" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.971586" elapsed="0.000000"/>
</branch>
<branch type="EXCEPT">
<pattern>*Invalid ISIN*</pattern>
<kw name="Set Test Variable" owner="BuiltIn">
<arg>${TRADE_ID}</arg>
<arg>INVALID</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-11-11T20:05:31.971586" elapsed="0.007833"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.971586" elapsed="0.007833"/>
</try>
<status status="PASS" start="2025-11-11T20:05:31.969753" elapsed="0.009666"/>
</kw>
<kw name="Then trade history contains &quot;PENDING_CONFIRMATION&quot;" owner="trading_bdd" source_name="trade history contains &quot;${csv}&quot;">
<if>
<branch type="IF" condition="&quot;${TRADE_ID}&quot; == &quot;INVALID&quot;">
<kw name="Log" owner="BuiltIn">
<arg>Trade was rejected due to invalid ISIN</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</kw>
<return>
<status status="NOT RUN" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</return>
<status status="NOT RUN" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</if>
<kw name="Assert Trade State History" owner="Trading">
<msg time="2025-11-11T20:05:31.979419" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${TRADE_ID}</arg>
<arg>CREATED</arg>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.979419" level="INFO">Trade e779cccc-9dd1-408e-be23-95156326e1b0 contains state: CREATED</msg>
<arg>Trade ${TRADE_ID} contains state: CREATED</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.000000"/>
</kw>
<tag>rapid_market</tag>
<status status="PASS" start="2025-11-11T20:05:31.960909" elapsed="0.018510"/>
</test>
<test id="s1-t11" name="10) Risk breach attempt" line="68">
<kw name="Given trader &quot;T1&quot; has exposure for notional &quot;50000000.0&quot;" owner="trading_bdd" source_name="trader &quot;${trader}&quot; has exposure for notional &quot;${notional}&quot;">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.987900" level="INFO">${notional_float} = 50000000.0</msg>
<var>${notional_float}</var>
<arg>float("${notional}".replace(",",""))</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.008481"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-11-11T20:05:31.987900" level="INFO">${adjusted} = 20000000</msg>
<var>${adjusted}</var>
<arg>min(${notional_float}, 20000000 if "${trader}" == "T1" else 40000000)</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-11-11T20:05:31.987900" elapsed="0.000000"/>
</kw>
<kw name="Validate Trader Exposure" owner="Trading">
<msg time="2025-11-11T20:05:31.990725" level="INFO">${ok} = True</msg>
<var>${ok}</var>
<arg>${trader}</arg>
<arg>${adjusted}</arg>
<status status="PASS" start="2025-11-11T20:05:31.987900" elapsed="0.002825"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${ok}</arg>
<arg>Exposure/credit breached for ${trader}</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-11-11T20:05:31.990725" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.011306"/>
</kw>
<tag>risk_breach</tag>
<status status="PASS" start="2025-11-11T20:05:31.979419" elapsed="0.011306"/>
</test>
<status status="PASS" start="2025-11-11T20:05:31.451536" elapsed="0.544849"/>
</suite>
<statistics>
<total>
<stat pass="11" fail="0" skip="0">All Tests</stat>
</total>
<tag>
<stat pass="1" fail="0" skip="0">cancel_before_confirm</stat>
<stat pass="2" fail="0" skip="0">concurrency</stat>
<stat pass="1" fail="0" skip="0">double_exec</stat>
<stat pass="1" fail="0" skip="0">invalid_isin</stat>
<stat pass="1" fail="0" skip="0">partial_fill</stat>
<stat pass="1" fail="0" skip="0">price_deviation</stat>
<stat pass="1" fail="0" skip="0">rapid_market</stat>
<stat pass="1" fail="0" skip="0">risk_breach</stat>
<stat pass="1" fail="0" skip="0">system_failure</stat>
<stat pass="1" fail="0" skip="0">valid</stat>
</tag>
<suite>
<stat name="Run Feature Tests" id="s1" pass="11" fail="0" skip="0">Run Feature Tests</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
